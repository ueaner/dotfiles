# Desktop Environment
---

# ----------------------------------------------------------------
# macOS-ish desktop environment
# ----------------------------------------------------------------
- name: Install and start xremap service (include xremap)
  when: ansible_distribution == "Fedora"
  ansible.builtin.include_tasks: xremap.yml

- name: Configure Desktop Environment (include desktop-environment)
  ansible.builtin.include_tasks: desktop-environment.yml

# ----------------------------------------------------------------
# Input Method
# ----------------------------------------------------------------
- name: Configure Input Method (include input-method)
  when:
    - chinese
  ansible.builtin.include_tasks: input-method.yml

# ----------------------------------------------------------------
# broadcom wireless
# ----------------------------------------------------------------
- name: Install the broadcom wireless driver under MacBook (kernel-{{ kernel_version }})
  when:
    - ansible_distribution == "Fedora"
    - ansible_product_name.startswith('MacBook')
  ansible.builtin.script: ~/bin/kernel-broadcom-wl
  changed_when: false
  # failed_when: basic_broadcom_wl.rc != 0
  notify: Need to reboot after installing wireless driver under MacBook
