packages:
  - type: github_release
    repo_owner: shadowsocks
    repo_name: shadowsocks-rust
    description: A Rust port of shadowsocks
    asset: shadowsocks-{{.Version}}.{{.Arch}}-{{.OS}}.{{.Format}}
    format: tar.xz
    windows_arm_emulation: true
    overrides:
      - goos: windows
        format: zip
    replacements:
      amd64: x86_64
      arm64: aarch64
      darwin: apple-darwin
      linux: unknown-linux-gnu
      windows: pc-windows-msvc
    checksum:
      type: github_release
      asset: "{{.Asset}}.sha256"
      algorithm: sha256
    files:
      - name: sslocal
      - name: ssmanager
      - name: ssserver
      - name: ssservice
      - name: ssurl

  - type: http
    repo_owner: caddyserver
    repo_name: caddy
    name: corazawaf/coraza-caddy
    url: "https://caddyserver.com/api/download?os={{.OS}}&arch={{.Arch}}&p=github.com%2Fcorazawaf%2Fcoraza-caddy%2Fv2"
    replacements:
      darwin: darwin
      linux: linux
      amd64: amd64
      arm64: arm64
    files:
      - name: caddy

  - type: github_release
    repo_owner: lima-vm
    repo_name: socket_vmnet
    description: vmnet.framework support for unmodified rootless QEMU (no dependency on VDE)
    asset: socket_vmnet-{{trimV .Version}}-{{.Arch}}.{{.Format}}
    format: tar.gz
    replacements:
      amd64: x86_64
    checksum:
      type: github_release
      asset: SHA256SUMS
      algorithm: sha256
    github_artifact_attestations:
      signer_workflow: lima-vm/socket_vmnet/.github/workflows/release.yml
    supported_envs:
      - darwin
    files:
      - name: socket_vmnet
        src: opt/socket_vmnet/bin/socket_vmnet
      - name: socket_vmnet_client
        src: opt/socket_vmnet/bin/socket_vmnet_client
