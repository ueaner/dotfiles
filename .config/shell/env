# vim: set filetype=sh:

# 每次获取当前实际 tty 值
# shellcheck disable=SC2155
export GPG_TTY=$(tty)

log "SHELL_ENV_SOURCED: ${SHELL_ENV_SOURCED:-0}"

[[ -n "${SHELL_ENV_SOURCED:-}" ]] && return
export SHELL_ENV_SOURCED=1

log "sourcing ~/.config/shell/env.d/[0-9][0-9]*.sh"

for envfile in ~/.config/shell/env.d/[0-9][0-9]*.sh; do
    # shellcheck disable=SC2086
    # shellcheck source=/dev/null
    . $envfile
done

log "sourced"

# SYSTEMD_LOG_LEVEL=debug /usr/lib/systemd/user-environment-generators/30-systemd-environment-d-generator
# export $(/usr/lib/systemd/user-environment-generators/30-systemd-environment-d-generator)
# Set up the envvars file in $HOME/.config/environment.d/envvars.conf
