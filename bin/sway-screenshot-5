#!/usr/bin/env bash
# 截图和录屏操作菜单

# --- Rofi 菜单选项, 使用 Font Awesome SVG 文件 ---
FA_ICON_DIR=~/.local/share/fa-icons
# 截图： (U+F030, camera)
# 录制： (U+F03D, video)
# 含声： (U+F130, microphone)
# 停止： (U+F04D, stop)

options=$(
    cat <<EOF
Full Screen Shot\0icon\x1f$FA_ICON_DIR/camera.svg
Area Screen Shot\0icon\x1f$FA_ICON_DIR/camera.svg
Window Screen Shot\0icon\x1f$FA_ICON_DIR/camera.svg
Full Screen Record (No Audio)\0icon\x1f$FA_ICON_DIR/video.svg
Area Record (No Audio)\0icon\x1f$FA_ICON_DIR/video.svg
Full Screen Record (With Audio)\0icon\x1f$FA_ICON_DIR/microphone.svg
Area Record (With Audio)\0icon\x1f$FA_ICON_DIR/microphone.svg
Stop Recording\0icon\x1f$FA_ICON_DIR/stop.svg
EOF
)

# choice=$(echo "$RAW_CHOICE" | sed 's/<[^>]*>//g')

# 使用 rofi 显示菜单并获取用户选择
choice=$(echo -e "$options" | rofi -dmenu -i -p "Capture/Record Tool")

# --- 执行动作 ---
case "$choice" in
"Full Screen Shot")
    ~/bin/sway-screenshot output
    ;;
"Area Screen Shot")
    ~/bin/sway-screenshot area
    ;;
"Window Screen Shot")
    ~/bin/sway-screenshot window
    ;;
"Full Screen Record (No Audio)")
    ~/bin/sway-recording output_noaudio
    ;;
"Area Record (No Audio)")
    ~/bin/sway-recording area_noaudio
    ;;
"Full Screen Record (With Audio)")
    ~/bin/sway-recording output_audio
    ;;
"Area Record (With Audio)")
    ~/bin/sway-recording area_audio
    ;;
"Stop Recording")
    ~/bin/sway-recording stop
    ;;
esac
